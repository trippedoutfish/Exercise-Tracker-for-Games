<Microsoft.MobileBlazorBindings.Elements.ContentPage BackgroundColor="Color.FloralWhite">
    <StyleSheet Resource="Exercises.css" Assembly="GetType().Assembly"></StyleSheet>
    <Microsoft.MobileBlazorBindings.Elements.ScrollView>
        <Microsoft.MobileBlazorBindings.Elements.StackLayout HorizontalOptions="LayoutOptions.Center">
            @foreach (var item in items)
            {
                <Microsoft.MobileBlazorBindings.Elements.Frame BorderColor="Color.Gray" CornerRadius="5" Padding="8" WidthRequest="300">
                    <Microsoft.MobileBlazorBindings.Elements.StackLayout>
                        <Microsoft.MobileBlazorBindings.Elements.StackLayout Orientation="StackOrientation.Horizontal">
                            <Microsoft.MobileBlazorBindings.Elements.Label Text="@(item.Name + ": " + item.AmountLeft + " / " + item.AmountTotal)" class="redText" VerticalTextAlignment="TextAlignment.Center" HorizontalOptions="LayoutOptions.FillAndExpand" HorizontalTextAlignment="TextAlignment.Start" />
                            <Microsoft.MobileBlazorBindings.Elements.CheckBox IsChecked="@item.Done" IsCheckedChanged="@(() => FinishWorkOutItem(item))" HorizontalOptions="LayoutOptions.End" />
                        </Microsoft.MobileBlazorBindings.Elements.StackLayout>
                        <Microsoft.MobileBlazorBindings.Elements.StackLayout>
                            <Microsoft.MobileBlazorBindings.Elements.BoxView Color="Color.Gray" 
                                                                             HeightRequest="2" 
                                                                             HorizontalOptions="LayoutOptions.Fill" />
                            <Microsoft.MobileBlazorBindings.Elements.Label Text="Im not sure what goes here" />
                        </Microsoft.MobileBlazorBindings.Elements.StackLayout>
                    </Microsoft.MobileBlazorBindings.Elements.StackLayout>
                </Microsoft.MobileBlazorBindings.Elements.Frame>
            }
        </Microsoft.MobileBlazorBindings.Elements.StackLayout>

    </Microsoft.MobileBlazorBindings.Elements.ScrollView>
</Microsoft.MobileBlazorBindings.Elements.ContentPage>
@code {
    [Parameter] public WorkOutItemDatabase database { get; set; }

    int planks;
    int situps;
    int itemsLeft;
    List<WorkOutItem> items;

    protected override Task OnInitializedAsync()
    {

        RefreshItems();
        return base.OnInitializedAsync();
    }

    void IncrementPlanks()
    {
        planks++;
    }

    void DecrementPlanks()
    {
        planks--;
    }

    void IncrementSitups20()
    {
        WorkOutItem situps20 = new WorkOutItem();
        situps20.Name = "Situps";
        situps20.AmountTotal = 20;
        situps20.AmountLeft = 20;
        situps20.Done = false;
        database.SaveItemAsync(situps20);
        RefreshItems();
        situps += 20;
    }

    void DecrementSitups()
    {
        situps--;
    }

    void RefreshItems()
    {
        items = database.GetItemsAsync().Result;
        itemsLeft = items.Count;
    }

    void FinishWorkOutItem(WorkOutItem item)
    {
        item.Done = true;
        database.SaveItemAsync(item);
        //items.Remove(item);
        RefreshItems();
        //base.InvokeAsync(StateHasChanged);
    }
}